# LogAI MCP Server Configuration
# Copy this file to .env and customize as needed

# =============================================================================
# Redis Configuration
# =============================================================================
# Redis connection settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis retry configuration
REDIS_RETRY_DELAY=0.5
REDIS_MAX_RETRIES=100

# Redis memory and persistence
REDIS_MAX_MEMORY=500mb
REDIS_PERSISTENCE=false

# Enable/disable Redis coordination (set to false to use local state only)
REDIS_ENABLED=true

# =============================================================================
# Global Concurrency Limits
# =============================================================================
# Maximum concurrent searches across ALL SSH sessions
# Start conservative (20), increase based on server capacity
MAX_GLOBAL_SEARCHES=20

# Maximum parallel searches per single search call
MAX_PARALLEL_SEARCHES_PER_CALL=5

# =============================================================================
# Cache Configuration
# =============================================================================
# Cache size limits
CACHE_MAX_SIZE_MB=500
CACHE_MAX_ENTRIES=100

# Cache TTL (time to live) in minutes
CACHE_TTL_MINUTES=10

# =============================================================================
# Search Limits
# =============================================================================
# Auto-cancel searches after this many seconds
AUTO_CANCEL_TIMEOUT_SECONDS=300

# Number of matches to show in preview when results are large
PREVIEW_MATCHES_LIMIT=50

# =============================================================================
# File Output
# =============================================================================
# Directory for temporary file output
FILE_OUTPUT_DIR=/tmp/log-ai

# How long to keep search result files (in hours)
FILE_RETENTION_HOURS=24

# How often to run cleanup task (in hours)
CLEANUP_INTERVAL_HOURS=1

# =============================================================================
# Logging
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR
# Set to DEBUG to see detailed search and file operation logs
LOG_LEVEL=DEBUG

# Log format: text or json
LOG_FORMAT=text

# =============================================================================
# Organization Configuration
# =============================================================================
# Your organization's domain name
ORG_DOMAIN=example.com

# Your organization name (used in service naming)
ORG_NAME=example

# =============================================================================
# Remote Server Configuration (for deployment)
# =============================================================================
# Remote syslog server hostname
SYSLOG_SERVER=syslog.example.com

# SSH user for remote server access
SYSLOG_USER=view-user

# =============================================================================
# Sentry Configuration (Chunk 2 - Error Tracking)
# =============================================================================
# Sentry DSN (Data Source Name)
# Get from: https://sentry.{ORG_DOMAIN}/settings/projects/log-ai/keys/
# SENTRY_DSN=https://xxx@yyy.ingest.sentry.io/zzz

# Performance monitoring sample rates (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Alert webhooks
# SENTRY_ALERT_TEAMS_WEBHOOK=https://outlook.office.com/webhook/...
# SENTRY_ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/...

# =============================================================================
# Datadog Configuration (Phase 3 - APM & Metrics)
# =============================================================================
# Enable Datadog integration (set to true after obtaining API keys)
DD_ENABLED=false

# Datadog API credentials
# Get API Key from: https://app.datadoghq.com/organization-settings/api-keys
# Get App Key from: https://app.datadoghq.com/organization-settings/application-keys
# DD_API_KEY=your-api-key-here
# DD_APP_KEY=your-app-key-here

# Datadog Log Aggregation (Phase 3.5)
# Send Python application logs to Datadog for centralized search and trace correlation
SEND_LOGS_TO_DATADOG=true
# Datadog site (depends on your account region)
# Options: datadoghq.com (US1), datadoghq.eu (EU), us3.datadoghq.com (US3), us5.datadoghq.com (US5)
DD_SITE=datadoghq.com

# Service identification in Datadog APM
DD_SERVICE_NAME=log-ai-mcp
DD_ENV=production
DD_VERSION=1.0.0

# Datadog Agent connection (where metrics/traces are sent)
DD_AGENT_HOST=localhost
DD_AGENT_PORT=8125           # DogStatsD port
DD_TRACE_AGENT_PORT=8126    # APM trace agent port
